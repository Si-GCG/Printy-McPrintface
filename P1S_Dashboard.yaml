views:
  - title: Home
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - show_state: true
                show_name: true
                camera_view: auto
                fit_mode: cover
                type: picture-entity
                entity: YOUR P1S CAMERA ENTITY
              - type: custom:gap-card
                height: 5
              - type: custom:button-card
                entity: switch.3d_printer
                name: Printy McPrintface
                icon: mdi:printer-3d
                show_icon: true
                show_state: false
                layout: icon_name
                tap_action:
                  action: |
                    [[[
                      if (entity) return 'toggle';
                      else return 'none';
                    ]]]
                confirmation:
                  text: Toggle Printer Power?
                state:
                  - value: 'on'
                    icon: mdi:power
                    color: green
                  - value: 'off'
                    icon: mdi:power
                    color: grey
                styles:
                  grid:
                    - grid-template-columns: |
                        [[[
                          if (entity) return '20% 1fr 20%';
                          else return '20% 1fr 20%';
                        ]]]
                  icon:
                    - width: |
                        [[[
                          if (entity) return '65px';
                          else return '0px';
                        ]]]
                    - padding-left: 20px
                  name:
                    - text-wrap: balance
                    - font-size: 1.4em
                card_mod:
                  style: |
                    ha-card {
                      background: rgba(0,0,0,0);
                      border: none;
                      box-shadow: none !important;
                    }
              - type: custom:gap-card
                height: 5
              - type: custom:hui-element
                card_type: horizontal-stack
                cards:
                  - type: custom:button-card
                    variables:
                      pause_entity: button.p1s_YOUR_PRINTER_pause_printing
                      start_entity: button.p1s_YOUR_PRINTER_resume_printing
                    entity: sensor.p1s_YOUR_PRINTER_print_status
                    name: >
                      [[[  if (entity.state.toUpperCase() == 'RUNNING') return
                      "Pause";
                       else if (entity.state.toUpperCase() == 'PAUSE') return "Resume";
                      else return '';  ]]]
                    state:
                      - value: RUNNING
                        icon: mdi:pause
                        color: orange
                      - value: running
                        icon: mdi:pause
                        color: orange
                      - value: PAUSE
                        icon: mdi:play
                        color: orange
                      - value: pause
                        icon: mdi:play
                        color: orange
                      - value: OFFLINE
                        icon: mdi:void
                        color: grey
                      - value: offline
                        icon: mdi:void
                        color: grey
                      - value: IDLE
                        icon: mdi:void
                        color: grey
                      - value: idle
                        icon: mdi:void
                        color: grey
                      - value: FAILED
                        icon: mdi:void
                        color: grey
                      - value: failed
                        icon: mdi:void
                        color: grey
                      - value: FINISH
                        icon: mdi:void
                        color: grey
                      - value: finish
                        icon: mdi:void
                        color: grey
                      - value: PREPARE
                        icon: mdi:void
                        color: grey
                      - value: prepare
                        icon: mdi:void
                        color: grey
                    tap_action:
                      action: >
                        [[[ if (entity.state.toUpperCase() == 'RUNNING' ||
                        entity.state.toUpperCase() == 'PAUSE') return
                        "call-service"; 

                        else return "none";

                        ]]]
                      service: button.press
                      service_data:
                        entity_id: >
                          [[[ if
                          (states['sensor.p1s_YOUR_PRINTER_print_status'].state.toUpperCase()
                          == 'RUNNING') 
                              return variables.pause_entity; 
                              if (states['sensor.p1s_YOUR_PRINTER_print_status'].state.toUpperCase() == 'PAUSE') 
                              return variables.start_entity; 
                            else return "";
                            ]]]
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('sensor.p1s_YOUR_PRINTER_print_status', 'RUNNING') or is_state('sensor.p1s_YOUR_PRINTER_print_status', 'PAUSE') or is_state('sensor.p1s_YOUR_PRINTER_print_status', 'running') or is_state('sensor.p1s_YOUR_PRINTER_print_status', 'pause') %} orange; {% else %} grey; {% endif %}    
                        }
                  - type: custom:gap-card
                  - type: custom:button-card
                    entity: sensor.p1s_YOUR_PRINTER_print_status
                    name: >
                      [[[  if (entity.state.toUpperCase() == 'RUNNING') return
                      "Cancel";
                       else if (entity.state.toUpperCase() =='PAUSE') return "Cancel";
                      else return '';  ]]]
                    confirmation:
                      text: Cancel Print?
                    state:
                      - value: RUNNING
                        icon: mdi:cancel
                        color: red
                      - value: running
                        icon: mdi:cancel
                        color: red
                      - value: PAUSE
                        icon: mdi:cancel
                        color: red
                      - value: pause
                        icon: mdi:cancel
                        color: red
                      - value: OFFLINE
                        icon: mdi:void
                        color: grey
                      - value: offline
                        icon: mdi:void
                        color: grey
                      - value: IDLE
                        icon: mdi:void
                        color: grey
                      - value: idle
                        icon: mdi:void
                        color: grey
                      - value: FAILED
                        icon: mdi:void
                        color: grey
                      - value: failed
                        icon: mdi:void
                        color: grey
                      - value: FINISH
                        icon: mdi:void
                        color: grey
                      - value: finish
                        icon: mdi:void
                        color: grey
                      - value: PREPARE
                        icon: mdi:void
                        color: grey
                      - value: prepare
                        icon: mdi:void
                        color: grey
                    tap_action:
                      action: >
                        [[[ if (entity.state.toUpperCase() == 'RUNNING' ||
                        entity.state.toUpperCase() == 'PAUSE') return
                        "call-service";  else return "none"; ]]]
                      service: button.press
                      service_data:
                        entity_id: button.p1s_YOUR_PRINTER_stop_printing
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('sensor.p1s_YOUR_PRINTER_print_status', 'RUNNING') or is_state('sensor.p1s_YOUR_PRINTER_print_status', 'PAUSE') or is_state('sensor.p1s_YOUR_PRINTER_print_status', 'running') or is_state('sensor.p1s_YOUR_PRINTER_print_status', 'pause') %} red; {% else %} grey; {% endif %}
                        }
          - type: custom:ha-bambulab-print_status-card
            printer: 97d12e844c5839f1e624efe20106315b
            custom_humidity: sensor.p1s_YOUR_PRINTER_ams_1_humidity
            custom_temperature: sensor.p1s_YOUR_PRINTER_ams_1_temperature
            custom_light: light.p1s_YOUR_PRINTER_chamber_light
            custom_camera: camera.p1s_YOUR_PRINTER_camera
            style: graphic
          - type: custom:ha-bambulab-print_control-card
            printer: 97d12e844c5839f1e624efe20106315b
          - type: custom:ha-bambulab-ams-card
            entity: ''
            header: ''
            subtitle: ''
            style: graphic
            ams: 0131141d26151b7483b16e44f7540f31
            show_type: true
            show_info_bar: true
          - type: custom:ha-bambulab-spool-card
            header: Header Text
            subtitle: Subtitle Text
            show_header: true
            spool: 0ce0f520ca2191f25ba34e5c375cf66e
            show_type: true
          - type: picture-elements
            elements:
              - type: custom:config-template-card
                entities:
                  - sensor.p1s_YOUR_PRINTER_externalspool_external_spool
                element:
                  type: state-icon
                  entity: sensor.p1s_YOUR_PRINTER_externalspool_external_spool
                  icon: >-
                    ${states['sensor.p1s_YOUR_PRINTER_externalspool_external_spool'].state.toLowerCase()
                    != 'empty' ? 'fapro:filament-1' : 'mdi:tray' }
                style:
                  top: 50%
                  left: 50%
                  transform: translate(-50%, -50%) scale(200%)
                  '--paper-item-icon-color': var(--tray_vt_color)
                  background-color: rgba(0,0,0,0.5)
                  box-shadow: 0 0 5px 5px var(--tray_vt_bg)
                  border-radius: 50px
                  '--mdc-icon-size': 1.8em
              - type: state-label
                entity: sensor.p1s_YOUR_PRINTER_externalspool_external_spool
                attribute: type
                tap_action:
                  action: none
                style:
                  top: 50%
                  left: 85%
                  text-align: center
                  font-size: 1em
                  background-color: rgba(0,0,0,0.4)
                  box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4)
                  border-radius: 50px
                  pointer-events: none
                  color: '#FFFFFF'
            image: /local/media/bambuprinter/spool.png
            card_mod:
              style: |
                ha-card {
                  margin-left: auto;
                  margin-right: auto;
                  width: 60%;
                  height: 60%;
                  background: none !important;
                  border: none !important;
                  box-shadow: none !important;
                  --tray_vt_color: {{state_attr('sensor.p1s_YOUR_PRINTER_externalspool_external_spool', 'color') }};
                  --tray_vt_bg: {% if is_state_attr('sensor.p1s_YOUR_PRINTER_externalspool_external_spool', 'active', true) %} rgba(255, 255, 126, 0.5); {% else %} rgba(0,0,0,0.5); {% endif %}
                }
          - type: vertical-stack
            cards:
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-title-card
                    title: ''
                    subtitle: Print Details
                    alignment: center
                  - type: custom:mushroom-entity-card
                    entity: sensor.p1s_YOUR_PRINTER_task_name
                    name: Task
                    icon: mdi:clipboard-text
                  - type: horizontal-stack
                    cards:
                      - type: custom:mushroom-entity-card
                        entity: sensor.p1s_YOUR_PRINTER_print_progress
                        name: Progress
                        icon: mdi:progress-helper
                      - type: custom:mushroom-template-card
                        primary: Layer
                        icon_color: var(--rgb-state-entity)
                        secondary: >-
                          {{states('sensor.p1s_YOUR_PRINTER_current_layer')}}
                          /
                          {{states('sensor.p1s_YOUR_PRINTER_total_layer_count')}}
                        icon: mdi:layers
              - type: custom:tabbed-card
                options: {}
                tabs:
                  - card:
                      type: vertical-stack
                      cards:
                        - type: entities
                          entities:
                            - entity: sensor.p1s_YOUR_PRINTER_current_stage
                              name: Stage
                            - entity: binary_sensor.p1s_YOUR_PRINTER_hms_errors
                              name: HMS Notifications
                            - entity: sensor.p1s_YOUR_PRINTER_start_time
                              name: Start Time
                              secondary_info: last-changed
                            - entity: sensor.p1s_YOUR_PRINTER_end_time
                              name: End Time
                            - entity: sensor.p1s_YOUR_PRINTER_remaining_time
                              name: Remaining Time
                            - entity: >-
                                binary_sensor.p1s_YOUR_PRINTER_firmware_update
                              name: Firmware
                            - entity: sensor.p1s_YOUR_PRINTER_active_tray
                              name: Current Filament
                    attributes:
                      label: Details
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: fan.p1s_YOUR_PRINTER_aux_fan
                    state_not: unavailable
                  - condition: state
                    entity: sensor.p1s_YOUR_PRINTER_aux_fan_speed
                    state_not: unknown
                card:
                  type: custom:mushroom-fan-card
                  entity: fan.p1s_YOUR_PRINTER_aux_fan
                  name: Aux Fan
                  icon_animation: true
                  show_percentage_control: true
                  fill_container: false
                  layout: horizontal
              - type: conditional
                card:
                  type: custom:mushroom-fan-card
                  entity: fan.p1s_YOUR_PRINTER_chamber_fan
                  name: Chamber Fan
                  icon_animation: true
                  show_percentage_control: true
                  fill_container: false
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: fan.p1s_YOUR_PRINTER_chamber_fan
                    state_not: unavailable
                  - condition: state
                    entity: sensor.p1s_YOUR_PRINTER_chamber_fan_speed
                    state_not: unknown
              - type: conditional
                card:
                  type: custom:mushroom-fan-card
                  entity: fan.p1s_YOUR_PRINTER_cooling_fan
                  name: Part Cooling Fan
                  icon_animation: true
                  show_percentage_control: true
                  fill_container: false
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: fan.p1s_YOUR_PRINTER_cooling_fan
                    state_not: unavailable
                  - condition: state
                    entity: sensor.p1s_YOUR_PRINTER_cooling_fan_speed
                    state_not: unknown
              - type: conditional
                card:
                  type: custom:mushroom-number-card
                  entity: number.p1s_YOUR_PRINTER_nozzle_target_temperature
                  name: Set Nozzle Temp
                  layout: horizontal
                  display_mode: buttons
                conditions:
                  - condition: state
                    entity: number.p1s_YOUR_PRINTER_nozzle_target_temperature
                    state_not: unavailable
              - type: conditional
                card:
                  type: custom:mushroom-number-card
                  entity: number.p1s_YOUR_PRINTER_bed_target_temperature
                  name: Set Bed Temp
                  display_mode: buttons
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: number.p1s_YOUR_PRINTER_bed_target_temperature
                    state_not: unavailable
              - type: conditional
                card:
                  type: custom:mushroom-number-card
                  entity: number.p1s_YOUR_PRINTER_chamber_target_temperature
                  name: Set Chamber Temp
                  display_mode: buttons
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: sensor.p1s_YOUR_PRINTER_bed_temperature
                    state_not: unavailable
        column_span: 3
